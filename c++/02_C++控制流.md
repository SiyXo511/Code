# C++控制流

本教程将学习C++中的控制流语句，包括条件语句、循环语句等。

## 1. 条件语句

### if语句

```cpp
#include <iostream>
using namespace std;

int main() {
    int score;
    cout << "请输入分数: ";
    cin >> score;
    
    if (score >= 90) {
        cout << "优秀" << endl;
    } else if (score >= 80) {
        cout << "良好" << endl;
    } else if (score >= 60) {
        cout << "及格" << endl;
    } else {
        cout << "不及格" << endl;
    }
    
    return 0;
}
```

### 三目运算符

```cpp
#include <iostream>
using namespace std;

int main() {
    int a = 10, b = 20;
    
    // 三目运算符
    int max = (a > b) ? a : b;
    cout << "最大值: " << max << endl;
    
    // 嵌套三目运算符
    int x = 5, y = 10, z = 15;
    int largest = (x > y) ? ((x > z) ? x : z) : ((y > z) ? y : z);
    cout << "最大值: " << largest << endl;
    
    return 0;
}
```

### switch语句

```cpp
#include <iostream>
using namespace std;

int main() {
    int choice;
    cout << "请选择操作 (1-4): ";
    cin >> choice;
    
    switch (choice) {
        case 1:
            cout << "你选择了选项1" << endl;
            break;
        case 2:
            cout << "你选择了选项2" << endl;
            break;
        case 3:
            cout << "你选择了选项3" << endl;
            break;
        case 4:
            cout << "你选择了选项4" << endl;
            break;
        default:
            cout << "无效的选择" << endl;
            break;
    }
    
    // C++17: switch表达式
    switch (choice) {
        case 1:
        case 2:
        case 3:
            cout << "选项1-3" << endl;
            break;
        default:
            cout << "其他选项" << endl;
    }
    
    return 0;
}
```

## 2. 循环语句

### for循环

```cpp
#include <iostream>
using namespace std;

int main() {
    // 传统for循环
    for (int i = 0; i < 10; i++) {
        cout << i << " ";
    }
    cout << endl;
    
    // 范围for循环（C++11）
    int arr[] = {1, 2, 3, 4, 5};
    for (int value : arr) {
        cout << value << " ";
    }
    cout << endl;
    
    // 范围for循环使用auto
    for (auto value : arr) {
        cout << value << " ";
    }
    cout << endl;
    
    // 字符串遍历
    string str = "Hello";
    for (char c : str) {
        cout << c << " ";
    }
    cout << endl;
    
    // 引用遍历（可以修改）
    for (int& value : arr) {
        value *= 2;
    }
    
    for (int value : arr) {
        cout << value << " ";
    }
    cout << endl;
    
    return 0;
}
```

### while循环

```cpp
#include <iostream>
using namespace std;

int main() {
    int count = 0;
    
    while (count < 5) {
        cout << count << " ";
        count++;
    }
    cout << endl;
    
    // 读取直到满足条件
    int num;
    cout << "请输入一个正数: ";
    while (cin >> num && num <= 0) {
        cout << "请输入一个正数: ";
    }
    cout << "你输入的是: " << num << endl;
    
    return 0;
}
```

### do-while循环

```cpp
#include <iostream>
using namespace std;

int main() {
    int choice;
    
    do {
        cout << "请选择操作 (1-3): ";
        cin >> choice;
        
        if (choice >= 1 && choice <= 3) {
            cout << "你选择了选项 " << choice << endl;
        } else {
            cout << "无效选择，请重试" << endl;
        }
    } while (choice < 1 || choice > 3);
    
    return 0;
}
```

## 3. 跳转语句

### break语句

```cpp
#include <iostream>
using namespace std;

int main() {
    // 在循环中使用break
    for (int i = 0; i < 10; i++) {
        if (i == 5) {
            break;  // 跳出循环
        }
        cout << i << " ";
    }
    cout << endl;
    
    // 在switch中使用break
    int x = 2;
    switch (x) {
        case 1:
            cout << "1" << endl;
            break;
        case 2:
            cout << "2" << endl;
            // 没有break，会继续执行下一个case
        case 3:
            cout << "3" << endl;
            break;
    }
    
    return 0;
}
```

### continue语句

```cpp
#include <iostream>
using namespace std;

int main() {
    // 跳过当前迭代，继续下一次
    for (int i = 0; i < 10; i++) {
        if (i % 2 == 0) {
            continue;  // 跳过偶数
        }
        cout << i << " ";  // 只输出奇数
    }
    cout << endl;
    
    return 0;
}
```

### goto语句（不推荐）

```cpp
#include <iostream>
using namespace std;

int main() {
    int i = 0;
    
start:
    cout << i << " ";
    i++;
    if (i < 10) {
        goto start;
    }
    cout << endl;
    
    // goto应该谨慎使用，通常可以用循环替代
    return 0;
}
```

## 4. 嵌套循环

```cpp
#include <iostream>
using namespace std;

int main() {
    // 打印乘法表
    for (int i = 1; i <= 9; i++) {
        for (int j = 1; j <= i; j++) {
            cout << j << "x" << i << "=" << (i * j) << "\t";
        }
        cout << endl;
    }
    
    // 打印图案
    int n = 5;
    for (int i = 1; i <= n; i++) {
        for (int j = 1; j <= i; j++) {
            cout << "* ";
        }
        cout << endl;
    }
    
    return 0;
}
```

## 5. 基于范围的循环（C++11）

```cpp
#include <iostream>
#include <vector>
#include <map>
#include <string>
using namespace std;

int main() {
    // 数组
    int arr[] = {1, 2, 3, 4, 5};
    for (int x : arr) {
        cout << x << " ";
    }
    cout << endl;
    
    // vector
    vector<int> vec = {10, 20, 30, 40, 50};
    for (int x : vec) {
        cout << x << " ";
    }
    cout << endl;
    
    // 使用引用修改
    for (int& x : vec) {
        x *= 2;
    }
    
    for (int x : vec) {
        cout << x << " ";
    }
    cout << endl;
    
    // map
    map<string, int> scores = {
        {"Alice", 95},
        {"Bob", 87},
        {"Charlie", 92}
    };
    
    for (const auto& pair : scores) {
        cout << pair.first << ": " << pair.second << endl;
    }
    
    // C++17: 结构化绑定
    for (const auto& [name, score] : scores) {
        cout << name << ": " << score << endl;
    }
    
    return 0;
}
```

## 6. 综合示例

### 猜数字游戏

```cpp
#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;

int main() {
    srand(time(0));  // 初始化随机数种子
    int secret = rand() % 100 + 1;  // 1-100的随机数
    int guess;
    int attempts = 0;
    
    cout << "欢迎来到猜数字游戏！" << endl;
    cout << "我想了一个1-100之间的数字，猜猜看？" << endl;
    
    while (true) {
        cout << "请输入你的猜测: ";
        cin >> guess;
        attempts++;
        
        if (guess < secret) {
            cout << "太小了！" << endl;
        } else if (guess > secret) {
            cout << "太大了！" << endl;
        } else {
            cout << "恭喜你，猜对了！" << endl;
            cout << "你用了 " << attempts << " 次尝试" << endl;
            break;
        }
    }
    
    return 0;
}
```

## 练习

1. 编写一个程序，判断一个数是否为素数
2. 编写一个程序，计算斐波那契数列的前n项
3. 编写一个程序，打印各种图案（三角形、菱形等）
4. 编写一个程序，实现简单的计算器（使用switch）

