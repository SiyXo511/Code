# C++数组和字符串

本教程将学习C++中的数组和字符串，包括数组、vector、string类等。

## 1. 数组

### 一维数组

```cpp
#include <iostream>
using namespace std;

int main() {
    // 数组声明和初始化
    int arr1[5];  // 未初始化
    int arr2[5] = {1, 2, 3, 4, 5};  // 初始化
    int arr3[] = {1, 2, 3};  // 自动推导大小
    
    // 部分初始化
    int arr4[5] = {1, 2};  // 其他元素为0
    
    // 访问元素
    cout << arr2[0] << endl;  // 第一个元素
    cout << arr2[4] << endl;  // 最后一个元素
    
    // 遍历数组
    for (int i = 0; i < 5; i++) {
        cout << arr2[i] << " ";
    }
    cout << endl;
    
    // 范围for循环（C++11）
    for (int x : arr2) {
        cout << x << " ";
    }
    cout << endl;
    
    return 0;
}
```

### 二维数组

```cpp
#include <iostream>
using namespace std;

int main() {
    // 二维数组
    int matrix[3][4] = {
        {1, 2, 3, 4},
        {5, 6, 7, 8},
        {9, 10, 11, 12}
    };
    
    // 访问元素
    cout << matrix[0][0] << endl;  // 1
    cout << matrix[1][2] << endl;  // 7
    
    // 遍历二维数组
    for (int i = 0; i < 3; i++) {
        for (int j = 0; j < 4; j++) {
            cout << matrix[i][j] << "\t";
        }
        cout << endl;
    }
    
    return 0;
}
```

## 2. vector容器

### vector基础

```cpp
#include <iostream>
#include <vector>
using namespace std;

int main() {
    // 创建vector
    vector<int> vec1;  // 空vector
    vector<int> vec2(5);  // 5个元素，值为0
    vector<int> vec3(5, 10);  // 5个元素，值为10
    vector<int> vec4{1, 2, 3, 4, 5};  // 初始化列表（C++11）
    
    // 添加元素
    vec1.push_back(10);
    vec1.push_back(20);
    vec1.push_back(30);
    
    // 访问元素
    cout << vec1[0] << endl;  // 使用下标（不检查边界）
    cout << vec1.at(0) << endl;  // 使用at（检查边界）
    cout << vec1.front() << endl;  // 第一个元素
    cout << vec1.back() << endl;  // 最后一个元素
    
    // 大小
    cout << "大小: " << vec1.size() << endl;
    cout << "容量: " << vec1.capacity() << endl;
    cout << "是否为空: " << vec1.empty() << endl;
    
    return 0;
}
```

### vector操作

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std;

int main() {
    vector<int> vec = {5, 2, 8, 1, 9};
    
    // 遍历
    for (int x : vec) {
        cout << x << " ";
    }
    cout << endl;
    
    // 排序
    sort(vec.begin(), vec.end());
    for (int x : vec) {
        cout << x << " ";
    }
    cout << endl;
    
    // 查找
    auto it = find(vec.begin(), vec.end(), 8);
    if (it != vec.end()) {
        cout << "找到8，位置: " << distance(vec.begin(), it) << endl;
    }
    
    // 插入
    vec.insert(vec.begin() + 2, 100);
    
    // 删除
    vec.erase(vec.begin());
    vec.pop_back();
    
    // 清空
    vec.clear();
    
    return 0;
}
```

## 3. 字符串

### C风格字符串

```cpp
#include <iostream>
#include <cstring>
using namespace std;

int main() {
    // C风格字符串
    char str1[] = "Hello";
    char str2[20] = "World";
    
    // 字符串长度
    cout << strlen(str1) << endl;
    
    // 字符串复制
    char str3[20];
    strcpy(str3, str1);
    cout << str3 << endl;
    
    // 字符串连接
    strcat(str3, " ");
    strcat(str3, str2);
    cout << str3 << endl;
    
    // 字符串比较
    if (strcmp(str1, str2) == 0) {
        cout << "相等" << endl;
    } else {
        cout << "不相等" << endl;
    }
    
    return 0;
}
```

### string类

```cpp
#include <iostream>
#include <string>
using namespace std;

int main() {
    // string初始化
    string str1 = "Hello";
    string str2("World");
    string str3(str1);  // 复制构造
    string str4(5, 'A');  // 5个'A'
    
    // 字符串连接
    string result = str1 + " " + str2;
    cout << result << endl;
    
    // 字符串长度
    cout << "长度: " << result.length() << endl;
    cout << "大小: " << result.size() << endl;
    
    // 访问字符
    cout << result[0] << endl;
    cout << result.at(0) << endl;  // 带边界检查
    
    // 子字符串
    string sub = result.substr(0, 5);
    cout << sub << endl;
    
    // 查找
    size_t pos = result.find("World");
    if (pos != string::npos) {
        cout << "找到位置: " << pos << endl;
    }
    
    // 替换
    result.replace(6, 5, "C++");
    cout << result << endl;
    
    // 插入
    result.insert(5, ", ");
    cout << result << endl;
    
    // 删除
    result.erase(5, 2);
    cout << result << endl;
    
    // 比较
    if (str1 == str2) {
        cout << "相等" << endl;
    } else {
        cout << "不相等" << endl;
    }
    
    return 0;
}
```

### string高级操作

```cpp
#include <iostream>
#include <string>
#include <sstream>
#include <algorithm>
using namespace std;

int main() {
    // 字符串转换为数字
    string num_str = "123";
    int num = stoi(num_str);  // string to int
    double dnum = stod("3.14");  // string to double
    long lnum = stol("1000");  // string to long
    
    // 数字转换为字符串
    int x = 456;
    string x_str = to_string(x);
    cout << x_str << endl;
    
    // 字符串流
    stringstream ss;
    ss << "Hello " << 123 << " World";
    string result = ss.str();
    cout << result << endl;
    
    // 从字符串流读取
    stringstream ss2("100 200 300");
    int a, b, c;
    ss2 >> a >> b >> c;
    cout << a << " " << b << " " << c << endl;
    
    // 字符串变换
    string str = "Hello World";
    transform(str.begin(), str.end(), str.begin(), ::toupper);
    cout << str << endl;
    
    transform(str.begin(), str.end(), str.begin(), ::tolower);
    cout << str << endl;
    
    return 0;
}
```

## 4. 数组和函数

### 数组作为参数

```cpp
#include <iostream>
using namespace std;

// 数组作为参数（传递指针）
void print_array(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        cout << arr[i] << " ";
    }
    cout << endl;
}

// 使用指针
void print_array_ptr(int* arr, int size) {
    for (int i = 0; i < size; i++) {
        cout << arr[i] << " ";
    }
    cout << endl;
}

// 使用引用（需要知道大小）
void print_array_ref(int (&arr)[5]) {
    for (int x : arr) {
        cout << x << " ";
    }
    cout << endl;
}

int main() {
    int arr[] = {1, 2, 3, 4, 5};
    print_array(arr, 5);
    print_array_ptr(arr, 5);
    print_array_ref(arr);
    
    return 0;
}
```

### vector作为参数

```cpp
#include <iostream>
#include <vector>
using namespace std;

// 按值传递（复制）
void print_vector(vector<int> vec) {
    for (int x : vec) {
        cout << x << " ";
    }
    cout << endl;
}

// 按引用传递（不复制，可以修改）
void modify_vector(vector<int>& vec) {
    vec.push_back(100);
}

// 按const引用传递（不复制，不能修改）
void print_vector_const(const vector<int>& vec) {
    for (int x : vec) {
        cout << x << " ";
    }
    cout << endl;
}

int main() {
    vector<int> vec = {1, 2, 3, 4, 5};
    print_vector(vec);
    modify_vector(vec);
    print_vector_const(vec);
    
    return 0;
}
```

## 5. 多维vector

```cpp
#include <iostream>
#include <vector>
using namespace std;

int main() {
    // 二维vector
    vector<vector<int>> matrix(3, vector<int>(4, 0));
    
    // 初始化
    matrix = {
        {1, 2, 3, 4},
        {5, 6, 7, 8},
        {9, 10, 11, 12}
    };
    
    // 访问元素
    cout << matrix[0][0] << endl;
    cout << matrix[1][2] << endl;
    
    // 遍历
    for (const auto& row : matrix) {
        for (int x : row) {
            cout << x << "\t";
        }
        cout << endl;
    }
    
    // 动态添加行
    matrix.push_back({13, 14, 15, 16});
    
    // 动态添加列
    for (auto& row : matrix) {
        row.push_back(99);
    }
    
    return 0;
}
```

## 6. 综合示例

### 矩阵运算

```cpp
#include <iostream>
#include <vector>
using namespace std;

vector<vector<int>> add_matrix(const vector<vector<int>>& a,
                                const vector<vector<int>>& b) {
    int rows = a.size();
    int cols = a[0].size();
    vector<vector<int>> result(rows, vector<int>(cols));
    
    for (int i = 0; i < rows; i++) {
        for (int j = 0; j < cols; j++) {
            result[i][j] = a[i][j] + b[i][j];
        }
    }
    
    return result;
}

void print_matrix(const vector<vector<int>>& matrix) {
    for (const auto& row : matrix) {
        for (int x : row) {
            cout << x << "\t";
        }
        cout << endl;
    }
}

int main() {
    vector<vector<int>> a = {
        {1, 2, 3},
        {4, 5, 6}
    };
    
    vector<vector<int>> b = {
        {7, 8, 9},
        {10, 11, 12}
    };
    
    vector<vector<int>> c = add_matrix(a, b);
    print_matrix(c);
    
    return 0;
}
```

## 练习

1. 编写一个函数，查找数组中的最大值和最小值
2. 实现字符串反转功能
3. 编写一个函数，统计字符串中每个字符出现的次数
4. 实现矩阵乘法
5. 编写一个函数，合并两个有序数组

