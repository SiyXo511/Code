# C++基础语法

本教程将学习C++的基础语法，包括第一个C++程序、变量、数据类型、输入输出等。

## 1. 第一个C++程序

```cpp
#include <iostream>
using namespace std;

int main() {
    cout << "Hello, World!" << endl;
    return 0;
}

// 编译: g++ hello.cpp -o hello
// 运行: ./hello
```

### 程序解析

- `#include <iostream>`: 包含输入输出流头文件
- `using namespace std;`: 使用标准命名空间
- `cout`: 标准输出流对象
- `<<`: 输出操作符
- `endl`: 换行并刷新缓冲区
- `main()`: 程序入口点

## 2. 变量和数据类型

### 基本数据类型

```cpp
#include <iostream>
using namespace std;

int main() {
    // 整数类型
    int a = 10;
    short b = 20;
    long c = 30L;
    long long d = 40LL;
    
    // 浮点类型
    float e = 3.14f;
    double f = 3.14159;
    long double g = 3.1415926535L;
    
    // 字符类型
    char ch = 'A';
    wchar_t wch = L'中';  // 宽字符
    
    // 布尔类型
    bool flag = true;
    bool flag2 = false;
    
    // 显示大小
    cout << "int: " << sizeof(int) << " 字节" << endl;
    cout << "double: " << sizeof(double) << " 字节" << endl;
    cout << "bool: " << sizeof(bool) << " 字节" << endl;
    
    return 0;
}
```

### 类型别名

```cpp
#include <iostream>
using namespace std;

typedef int Integer;  // C风格别名
using Real = double;   // C++11风格别名

int main() {
    Integer x = 100;
    Real y = 3.14;
    
    cout << x << endl;
    cout << y << endl;
    
    return 0;
}
```

## 3. 常量

### const关键字

```cpp
#include <iostream>
using namespace std;

int main() {
    // const常量
    const int MAX_SIZE = 100;
    const double PI = 3.14159;
    
    // MAX_SIZE = 200;  // 错误：常量不能修改
    
    cout << "最大值: " << MAX_SIZE << endl;
    cout << "PI: " << PI << endl;
    
    return 0;
}
```

### constexpr（C++11）

```cpp
#include <iostream>
using namespace std;

// 编译时常量
constexpr int SQUARE(int x) {
    return x * x;
}

int main() {
    constexpr int size = 10;
    constexpr int area = SQUARE(size);
    
    int arr[area];  // 可以用作数组大小
    
    cout << "面积: " << area << endl;
    
    return 0;
}
```

## 4. 输入输出

### 标准输入输出

```cpp
#include <iostream>
#include <string>
using namespace std;

int main() {
    // 输出
    cout << "请输入你的姓名: ";
    
    // 输入字符串
    string name;
    cin >> name;
    
    // 输入整数
    int age;
    cout << "请输入你的年龄: ";
    cin >> age;
    
    // 输出结果
    cout << "你好, " << name << "!" << endl;
    cout << "你今年 " << age << " 岁" << endl;
    
    return 0;
}
```

### 格式化输出

```cpp
#include <iostream>
#include <iomanip>
using namespace std;

int main() {
    int x = 100;
    double y = 3.14159;
    
    // 设置宽度
    cout << setw(10) << x << endl;
    
    // 设置精度
    cout << fixed << setprecision(2) << y << endl;
    
    // 十六进制输出
    cout << hex << 255 << endl;
    
    // 八进制输出
    cout << oct << 64 << endl;
    
    // 恢复十进制
    cout << dec << 100 << endl;
    
    return 0;
}
```

### getline读取整行

```cpp
#include <iostream>
#include <string>
using namespace std;

int main() {
    string line;
    
    cout << "请输入一行文本: ";
    getline(cin, line);  // 读取整行，包括空格
    
    cout << "你输入的是: " << line << endl;
    
    return 0;
}
```

## 5. 运算符

### 算术运算符

```cpp
#include <iostream>
using namespace std;

int main() {
    int a = 10, b = 3;
    
    cout << "a + b = " << a + b << endl;  // 13
    cout << "a - b = " << a - b << endl;  // 7
    cout << "a * b = " << a * b << endl;  // 30
    cout << "a / b = " << a / b << endl;  // 3 (整数除法)
    cout << "a % b = " << a % b << endl;  // 1 (取模)
    
    // 浮点除法
    double x = 10.0, y = 3.0;
    cout << "x / y = " << x / y << endl;  // 3.33333
    
    return 0;
}
```

### 关系运算符

```cpp
#include <iostream>
using namespace std;

int main() {
    int a = 10, b = 20;
    
    cout << (a == b) << endl;  // 0 (false)
    cout << (a != b) << endl;  // 1 (true)
    cout << (a < b) << endl;   // 1 (true)
    cout << (a > b) << endl;   // 0 (false)
    cout << (a <= b) << endl;  // 1 (true)
    cout << (a >= b) << endl;  // 0 (false)
    
    return 0;
}
```

### 逻辑运算符

```cpp
#include <iostream>
using namespace std;

int main() {
    bool p = true, q = false;
    
    cout << (p && q) << endl;  // 0 (false)
    cout << (p || q) << endl;  // 1 (true)
    cout << (!p) << endl;      // 0 (false)
    
    return 0;
}
```

### 赋值运算符

```cpp
#include <iostream>
using namespace std;

int main() {
    int x = 10;
    
    x += 5;   // x = x + 5
    cout << x << endl;  // 15
    
    x -= 3;   // x = x - 3
    cout << x << endl;  // 12
    
    x *= 2;   // x = x * 2
    cout << x << endl;  // 24
    
    x /= 4;   // x = x / 4
    cout << x << endl;  // 6
    
    x %= 4;   // x = x % 4
    cout << x << endl;  // 2
    
    return 0;
}
```

### 自增自减运算符

```cpp
#include <iostream>
using namespace std;

int main() {
    int x = 10;
    
    cout << x++ << endl;  // 10 (先使用后增加)
    cout << x << endl;    // 11
    
    cout << ++x << endl;  // 12 (先增加后使用)
    cout << x << endl;    // 12
    
    cout << x-- << endl;  // 12 (先使用后减少)
    cout << x << endl;    // 11
    
    cout << --x << endl;  // 10 (先减少后使用)
    cout << x << endl;    // 10
    
    return 0;
}
```

## 6. 类型转换

### 隐式类型转换

```cpp
#include <iostream>
using namespace std;

int main() {
    int x = 10;
    double y = x;  // 隐式转换：int -> double
    
    double a = 3.14;
    int b = a;  // 隐式转换：double -> int (截断)
    
    cout << "x: " << x << ", y: " << y << endl;
    cout << "a: " << a << ", b: " << b << endl;
    
    return 0;
}
```

### 显式类型转换

```cpp
#include <iostream>
using namespace std;

int main() {
    double x = 3.14;
    
    // C风格转换
    int a = (int)x;
    
    // C++静态转换
    int b = static_cast<int>(x);
    
    // 动态转换（用于多态）
    // Base* ptr = dynamic_cast<Derived*>(base_ptr);
    
    // 常量转换
    const int c = 100;
    int* d = const_cast<int*>(&c);
    
    // 重新解释转换（危险）
    int e = 65;
    char* f = reinterpret_cast<char*>(&e);
    
    cout << "a: " << a << endl;
    cout << "b: " << b << endl;
    
    return 0;
}
```

## 7. 字符串

### string类

```cpp
#include <iostream>
#include <string>
using namespace std;

int main() {
    // 字符串初始化
    string str1 = "Hello";
    string str2("World");
    string str3(str1);  // 复制构造
    
    // 字符串连接
    string result = str1 + " " + str2;
    cout << result << endl;  // "Hello World"
    
    // 字符串长度
    cout << "长度: " << result.length() << endl;
    cout << "大小: " << result.size() << endl;
    
    // 访问字符
    cout << result[0] << endl;  // 'H'
    cout << result.at(0) << endl;  // 'H' (带边界检查)
    
    // 子字符串
    string sub = result.substr(0, 5);
    cout << sub << endl;  // "Hello"
    
    // 查找
    size_t pos = result.find("World");
    if (pos != string::npos) {
        cout << "找到位置: " << pos << endl;
    }
    
    // 比较
    if (str1 == str2) {
        cout << "相等" << endl;
    } else {
        cout << "不相等" << endl;
    }
    
    return 0;
}
```

## 8. 注释

```cpp
#include <iostream>
using namespace std;

// 这是单行注释

/*
 * 这是多行注释
 * 可以写多行
 */

/**
 * 文档注释（Doxygen风格）
 * @brief 主函数
 * @return 程序退出码
 */
int main() {
    // 代码注释
    cout << "Hello, C++!" << endl;
    return 0;  // 返回0表示成功
}
```

## 练习

1. 编写一个程序，计算圆的面积和周长
2. 编写一个程序，交换两个变量的值
3. 编写一个程序，从用户输入读取姓名和年龄，并输出问候语
4. 编写一个程序，演示各种类型转换

