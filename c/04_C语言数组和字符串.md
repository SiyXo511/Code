# C语言数组和字符串

本教程将学习C语言中的数组和字符串操作。

## 1. 一维数组

### 数组声明和初始化

```c
#include <stdio.h>

int main() {
    // 声明数组
    int numbers[5];
    
    // 初始化数组
    int arr1[5] = {1, 2, 3, 4, 5};
    
    // 部分初始化（其余元素为0）
    int arr2[5] = {1, 2, 3};
    
    // 自动确定大小
    int arr3[] = {1, 2, 3, 4, 5};
    
    // 访问数组元素
    printf("arr1[0] = %d\n", arr1[0]);
    printf("arr1[4] = %d\n", arr1[4]);
    
    // 遍历数组
    printf("arr1的所有元素: ");
    for (int i = 0; i < 5; i++) {
        printf("%d ", arr1[i]);
    }
    printf("\n");
    
    return 0;
}
```

### 数组操作示例

```c
#include <stdio.h>

int main() {
    int numbers[10];
    int n = 10;
    
    // 输入数组元素
    printf("请输入10个整数:\n");
    for (int i = 0; i < n; i++) {
        scanf("%d", &numbers[i]);
    }
    
    // 计算数组元素的和
    int sum = 0;
    for (int i = 0; i < n; i++) {
        sum += numbers[i];
    }
    printf("数组元素之和: %d\n", sum);
    
    // 找出最大值和最小值
    int max = numbers[0];
    int min = numbers[0];
    for (int i = 1; i < n; i++) {
        if (numbers[i] > max) {
            max = numbers[i];
        }
        if (numbers[i] < min) {
            min = numbers[i];
        }
    }
    printf("最大值: %d\n", max);
    printf("最小值: %d\n", min);
    
    // 计算平均值
    double average = (double)sum / n;
    printf("平均值: %.2f\n", average);
    
    return 0;
}
```

## 2. 二维数组

### 二维数组声明和初始化

```c
#include <stdio.h>

int main() {
    // 声明二维数组
    int matrix[3][4];
    
    // 初始化二维数组
    int arr1[3][4] = {
        {1, 2, 3, 4},
        {5, 6, 7, 8},
        {9, 10, 11, 12}
    };
    
    // 另一种初始化方式
    int arr2[2][3] = {1, 2, 3, 4, 5, 6};
    
    // 遍历二维数组
    printf("二维数组arr1:\n");
    for (int i = 0; i < 3; i++) {
        for (int j = 0; j < 4; j++) {
            printf("%3d ", arr1[i][j]);
        }
        printf("\n");
    }
    
    return 0;
}
```

### 矩阵操作示例

```c
#include <stdio.h>

int main() {
    int matrix1[2][3] = {{1, 2, 3}, {4, 5, 6}};
    int matrix2[2][3] = {{7, 8, 9}, {10, 11, 12}};
    int result[2][3];
    
    // 矩阵相加
    printf("矩阵相加结果:\n");
    for (int i = 0; i < 2; i++) {
        for (int j = 0; j < 3; j++) {
            result[i][j] = matrix1[i][j] + matrix2[i][j];
            printf("%3d ", result[i][j]);
        }
        printf("\n");
    }
    
    // 转置矩阵
    printf("\n转置矩阵:\n");
    for (int j = 0; j < 3; j++) {
        for (int i = 0; i < 2; i++) {
            printf("%3d ", matrix1[i][j]);
        }
        printf("\n");
    }
    
    return 0;
}
```

## 3. 字符数组和字符串

### 字符串基础

```c
#include <stdio.h>
#include <string.h>

int main() {
    // 字符数组初始化
    char str1[20] = "Hello";
    char str2[] = "World";
    char str3[10] = {'H', 'e', 'l', 'l', 'o', '\0'};
    
    printf("str1: %s\n", str1);
    printf("str2: %s\n", str2);
    printf("str3: %s\n", str3);
    
    // 字符串输入
    char name[50];
    printf("请输入您的姓名: ");
    scanf("%s", name);  // 注意：scanf不能读取带空格的字符串
    printf("您好，%s!\n", name);
    
    return 0;
}
```

### 字符串操作函数

```c
#include <stdio.h>
#include <string.h>

int main() {
    char str1[50] = "Hello";
    char str2[50] = "World";
    char str3[50];
    
    // strlen: 字符串长度
    printf("str1的长度: %lu\n", strlen(str1));
    
    // strcpy: 字符串复制
    strcpy(str3, str1);
    printf("复制后str3: %s\n", str3);
    
    // strcat: 字符串连接
    strcat(str1, " ");
    strcat(str1, str2);
    printf("连接后str1: %s\n", str1);
    
    // strcmp: 字符串比较
    int result = strcmp("Hello", "Hello");
    printf("字符串比较结果: %d\n", result);  // 0表示相等
    
    result = strcmp("Apple", "Banana");
    printf("Apple和Banana比较: %d\n", result);  // 负数表示小于
    
    // strchr: 查找字符
    char *ptr = strchr(str1, 'o');
    if (ptr != NULL) {
        printf("找到字符'o'，位置: %ld\n", ptr - str1);
    }
    
    // strstr: 查找子字符串
    ptr = strstr(str1, "World");
    if (ptr != NULL) {
        printf("找到子字符串\"World\"\n");
    }
    
    return 0;
}
```

### 自定义字符串操作函数

```c
#include <stdio.h>

// 计算字符串长度
int my_strlen(char str[]) {
    int len = 0;
    while (str[len] != '\0') {
        len++;
    }
    return len;
}

// 字符串复制
void my_strcpy(char dest[], char src[]) {
    int i = 0;
    while (src[i] != '\0') {
        dest[i] = src[i];
        i++;
    }
    dest[i] = '\0';
}

// 字符串连接
void my_strcat(char dest[], char src[]) {
    int len = my_strlen(dest);
    int i = 0;
    while (src[i] != '\0') {
        dest[len + i] = src[i];
        i++;
    }
    dest[len + i] = '\0';
}

// 字符串比较
int my_strcmp(char str1[], char str2[]) {
    int i = 0;
    while (str1[i] != '\0' && str2[i] != '\0') {
        if (str1[i] != str2[i]) {
            return str1[i] - str2[i];
        }
        i++;
    }
    return str1[i] - str2[i];
}

int main() {
    char str1[50] = "Hello";
    char str2[50] = "World";
    
    printf("str1长度: %d\n", my_strlen(str1));
    
    my_strcat(str1, " ");
    my_strcat(str1, str2);
    printf("连接后: %s\n", str1);
    
    printf("比较结果: %d\n", my_strcmp("Hello", "Hello"));
    
    return 0;
}
```

## 4. 数组作为函数参数

```c
#include <stdio.h>

// 一维数组作为参数
void print_array(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");
}

// 计算数组元素的和
int sum_array(int arr[], int size) {
    int sum = 0;
    for (int i = 0; i < size; i++) {
        sum += arr[i];
    }
    return sum;
}

// 二维数组作为参数
void print_matrix(int arr[][4], int rows) {
    for (int i = 0; i < rows; i++) {
        for (int j = 0; j < 4; j++) {
            printf("%3d ", arr[i][j]);
        }
        printf("\n");
    }
}

int main() {
    int numbers[5] = {1, 2, 3, 4, 5};
    print_array(numbers, 5);
    printf("数组元素之和: %d\n", sum_array(numbers, 5));
    
    int matrix[3][4] = {
        {1, 2, 3, 4},
        {5, 6, 7, 8},
        {9, 10, 11, 12}
    };
    print_matrix(matrix, 3);
    
    return 0;
}
```

## 5. 字符串数组

```c
#include <stdio.h>
#include <string.h>

int main() {
    // 字符串数组（二维字符数组）
    char names[][20] = {
        "张三",
        "李四",
        "王五",
        "赵六"
    };
    
    printf("姓名列表:\n");
    for (int i = 0; i < 4; i++) {
        printf("%d. %s\n", i + 1, names[i]);
    }
    
    // 查找姓名
    char search[20];
    printf("\n请输入要查找的姓名: ");
    scanf("%s", search);
    
    int found = 0;
    for (int i = 0; i < 4; i++) {
        if (strcmp(names[i], search) == 0) {
            printf("找到: %s，位置: %d\n", names[i], i + 1);
            found = 1;
            break;
        }
    }
    if (!found) {
        printf("未找到\n");
    }
    
    return 0;
}
```

## 6. 综合示例

### 示例1：冒泡排序

```c
#include <stdio.h>

void bubble_sort(int arr[], int size) {
    for (int i = 0; i < size - 1; i++) {
        for (int j = 0; j < size - 1 - i; j++) {
            if (arr[j] > arr[j + 1]) {
                // 交换元素
                int temp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = temp;
            }
        }
    }
}

void print_array(int arr[], int size) {
    for (int i = 0; i < size; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");
}

int main() {
    int numbers[] = {64, 34, 25, 12, 22, 11, 90};
    int size = sizeof(numbers) / sizeof(numbers[0]);
    
    printf("排序前: ");
    print_array(numbers, size);
    
    bubble_sort(numbers, size);
    
    printf("排序后: ");
    print_array(numbers, size);
    
    return 0;
}
```

### 示例2：字符串反转

```c
#include <stdio.h>
#include <string.h>

void reverse_string(char str[]) {
    int len = strlen(str);
    for (int i = 0; i < len / 2; i++) {
        char temp = str[i];
        str[i] = str[len - 1 - i];
        str[len - 1 - i] = temp;
    }
}

int main() {
    char str[100];
    
    printf("请输入一个字符串: ");
    scanf("%s", str);
    
    printf("原字符串: %s\n", str);
    reverse_string(str);
    printf("反转后: %s\n", str);
    
    return 0;
}
```

## 练习

1. 编写程序，输入10个整数，找出第二大的数
2. 编写程序，实现选择排序算法
3. 编写程序，统计字符串中各字符出现的次数
4. 编写程序，实现字符串的插入操作

